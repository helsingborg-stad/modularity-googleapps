function modularityGoogleCalendar(){ModularityGoogleApps.Module.Calendar.init()}ModularityGoogleApps=ModularityGoogleApps||{},ModularityGoogleApps.Module=ModularityGoogleApps.Module||{},ModularityGoogleApps.Module.Calendar=function(o){function e(){}return e.prototype.init=function(){ModularityGoogleApps.Auth.checkAuth(function(o){return o&&!o.error?(gapi.client.load("calendar","v3",function(){ModularityGoogleApps.Module.Calendar.checkCalendarsPermissions()}),!0):(ModularityGoogleApps.Module.Calendar.showAuthButtons(),!1)})},e.prototype.checkCalendarsPermissions=function(){o(".modularity-mod-g-calendar").each(function(e,t){$element=o(t);var n=$element.find(".box").data("calendar-id");this.checkPermission(n,t)}.bind(this))},e.prototype.checkPermission=function(e,t){var n=o(t),a=gapi.client.calendar.calendarList.get({calendarId:e});a.execute(function(o){return n.find(".loading").remove(),!o||o.error?(n.find(".box-content").append('<div class="notice warning pricon pricon-notice-warning pricon-space-right">Ditt Google-konto har inte behörighet att visa kalendern.</div>'),!1):(ModularityGoogleApps.Module.Calendar.embed(t,o),!0)})},e.prototype.embed=function(e,t){var n=o(e);n.find(".box-content").append('<iframe src="https://calendar.google.com/calendar/embed?src='+t.id+"&ctz="+t.timeZone+'" style="border: 0" width="800" height="600" frameborder="0" scrolling="no"></iframe>')},e.prototype.showAuthButtons=function(){o(".modularity-mod-g-calendar .loading").remove(),o(".modularity-mod-g-calendar .box-content").append('<div class="gutter text-center"><div class="gutter gutter-bottom">Du måste logga in med ditt Google-konto för att visa kunna visa kalendern.</div><button data-action="google-auth">Logga in</button></div>')},new e}(jQuery);