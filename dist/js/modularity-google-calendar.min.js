function modularityGoogleCalendar(){ModularityGoogleApps.Module.Calendar.init()}ModularityGoogleApps=ModularityGoogleApps||{},ModularityGoogleApps.Module=ModularityGoogleApps.Module||{},ModularityGoogleApps.Module.Calendar=function(o){function e(){}return e.prototype.init=function(){ModularityGoogleApps.Auth.checkAuth(function(o){return o&&!o.error?(gapi.client.load("calendar","v3",function(){ModularityGoogleApps.Module.Calendar.checkCalendarsPermissions()}),!0):(ModularityGoogleApps.Module.Calendar.showAuthButtons(),!1)})},e.prototype.checkCalendarsPermissions=function(){o(".modularity-mod-g-calendar").each(function(e,n){$element=o(n);var t=$element.find(".box").data("calendar-id");this.checkPermission(t,n)}.bind(this))},e.prototype.checkPermission=function(e,n){var t=o(n),r=gapi.client.calendar.calendarList.get({calendarId:e});r.execute(function(o){return t.find(".loading").remove(),!o||o.error?(t.find(".box-content").append('                    <div class="notice warning pricon pricon-notice-warning pricon-space-right">                        '+ModularityGoogleApps.calendar.permissionError+"                    </div>                "),!1):(ModularityGoogleApps.Module.Calendar.embed(n,o),!0)})},e.prototype.embed=function(e,n){var t=o(e);t.find(".box-content").append('<iframe src="https://calendar.google.com/calendar/embed?src='+n.id+"&ctz="+n.timeZone+'" style="border: 0" width="100%" height="600" frameborder="0" scrolling="no"></iframe>')},e.prototype.showAuthButtons=function(){o(".modularity-mod-g-calendar .loading").remove(),o(".modularity-mod-g-calendar .box-content").append('            <div class="gutter text-center">                <div class="gutter gutter-bottom">                    '+ModularityGoogleApps.calendar.loginMessage+'                </div>                <button data-action="google-auth">'+ModularityGoogleApps.calendar.login+"</button>            </div>        ")},new e}(jQuery);